<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Finan√ßas</title>
    <link rel="stylesheet" href="../home/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../perfil/perfil.css">
</head>
<body>
    <nav id="sidebar">
        <div id="sidebar_content">
            <div id="user">
                <img src="../../img/log.svg" id="user_avatar" alt="Avatar">
    
                <p id="user_infos">
                    <span class="item-description">
                        Fulano de Tal
                    </span>
                    <span class="item-description">
                        Lorem Ipsum
                    </span>
                </p>
            </div>
    
            <ul id="side_items">
                <li class="side-item ative" data-index="0">
                    <a href="../home/home.html">
                        <i class="fa-solid fa-chart-line"></i>
                        <span class="item-description">
                            Dashboard
                        </span>
                    </a>
                </li>
    
                <li class="side-item" data-index="1">
                    <a href="../perfil/perfil.html">
                        <i class="fa-solid fa-user"></i>
                        <span class="item-description">
                            Perfil
                        </span>
                    </a>
                </li>
    
                <li class="side-item" data-index="3">
                    <a href="../movimentacoes/movimentacoes.html">
                        <i class="fa-solid fa-plus"></i>
                        <span class="item-description">
                            Movimenta√ß√µes
                        </span>
                    </a>
                </li>
    
                <li class="side-item" data-index="4">
                    <a href="../comunidade/comunidade.html">
                        <i class="fa-solid fa-pager"></i>
                        <span class="item-description">
                            Comunidade
                        </span>
                    </a>
                </li>
    
                <li class="side-item" data-index="5">
                    <a href="#">
                        <i class="fa-solid fa-gear"></i>
                        <span class="item-description">
                            Configura√ß√µes
                        </span>
                    </a>
                </li>
            </ul>
    
            <button id="open_btn">
                <i id="open_btn_icon" class="fa-solid fa-chevron-right"></i>
            </button>
        </div>
        <div id="logout">
            <button id="logout_btn" onclick="logout()">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span class="item-description">
                    Sair
                </span>
            </button>
        </div>
    </nav>
    <main id="main-content">
        <div id="profile-page">
            <header>
                <h1>P√°gina de Perfil</h1>
            </header>

            <!-- Foto do Usu√°rio -->
            <section id="user-photo">
                <h2>Foto de Perfil</h2>
                <div class="photo-container">
                    <img src="https://via.placeholder.com/150" alt="Foto do Usu√°rio" id="profile-image">
                    <label for="upload-photo" class="upload-photo-label">Alterar Foto</label>
                    <input type="file" id="upload-photo" accept="image/*" class="hidden">
                </div>
            </section>
    
            <!-- Informa√ß√µes do Usu√°rio -->
            <section id="user-info">
                <h2>Informa√ß√µes Pessoais</h2>
                <div class="info-item">
                    <label for="username">Nome de Usu√°rio:</label>
                    <p id="username">Jo√£o Silva</p>
                </div>
                <div class="info-item">
                    <label for="email">Email:</label>
                    <p id="email">joao.silva@email.com</p>
                </div>
                <div class="info-item">
                    <label for="phone">Telefone:</label>
                    <p id="phone">+55 11 98765-4321</p>
                </div>
                <div class="info-item">
                    <label for="address">Endere√ßo:</label>
                    <p id="address">Rua Exemplo, 123 - S√£o Paulo, SP</p>
                </div>
            </section>
    
            <!-- Altera√ß√£o de Senha e Seguran√ßa -->
             
            <!-- Se√ß√£o para troca de senha -->
            <section id="security">
                <h2>Senha e Seguran√ßa</h2>
                <div class="info-item">
                    <label for="current-password">Senha Atual:</label>
                    <input type="password" id="current-password" placeholder="Digite sua senha atual">
                </div>
                <div class="info-item">
                    <label for="new-password">Nova Senha:</label>
                    <input type="password" id="new-password" placeholder="Digite a nova senha">
                </div>
                <div class="info-item">
                    <label for="confirm-password">Confirmar Nova Senha:</label>
                    <input type="password" id="confirm-password" placeholder="Confirme a nova senha">
                </div>
                <button id="change-password-btn" onclick="changePassword()">Alterar Senha</button>
            </section>

    </main>
    <script>
        // Fun√ß√£o para alterar a foto de perfil
        const uploadPhotoInput = document.getElementById("upload-photo");
        const profileImage = document.getElementById("profile-image");

        // üîπ Carrega a foto do localStorage ao iniciar a p√°gina
        document.addEventListener("DOMContentLoaded", function () {
            const savedImage = localStorage.getItem("profileImage");
            if (savedImage) {
                profileImage.src = savedImage;
            }
        });

        // üîπ Evento para atualizar a foto e salvar no localStorage
        uploadPhotoInput.addEventListener("change", function (event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const imageData = e.target.result;
                    profileImage.src = imageData;
                    localStorage.setItem("profileImage", imageData); // Salva no localStorage
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
    <script src="../js/sidebar.js"></script>
    <script src="../../app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.3.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.3.1/firebase-auth-compat.js"></script>
    <script src="../../firebase-init.js"></script>
    <script src="../js/atualiza-senha.js"></script>
</body>
</html>
